<?xml version="1.0" encoding="utf-8" ?>
<container xmlns="http://symfony.com/schema/dic/services"
           xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
           xsi:schemaLocation="http://symfony.com/schema/dic/services http://symfony.com/schema/dic/services/services-1.0.xsd">

           <parameters>
               <parameter key="oneup_uploader.chunks.manager.class">Oneup\UploaderBundle\Uploader\Chunk\ChunkManager</parameter>
               <parameter key="oneup_uploader.orphanage.manager.class">Oneup\UploaderBundle\Uploader\Orphanage\OrphanageManager</parameter>
               <parameter key="oneup_uploader.orphanage.class">Oneup\UploaderBundle\Uploader\Orphanage\Orphanage</parameter>
               <parameter key="oneup_uploader.namer.uniqid.class">Oneup\UploaderBundle\Uploader\Naming\UniqidNamer</parameter>
               <parameter key="oneup_uploader.routing.loader.class">Oneup\UploaderBundle\Routing\RouteLoader</parameter>
               <parameter key="oneup_uploader.controller.class">Oneup\UploaderBundle\Controller\UploaderController</parameter>
               <parameter key="oneup_uploader.storage.class">Oneup\UploaderBundle\Uploader\Storage\GaufretteStorage</parameter>
               <parameter key="oneup_uploader.listener.session.class">Oneup\UploaderBundle\EventListener\OrphanageListener</parameter>
           </parameters>

           <services>
               <service id="oneup_uploader.chunk_manager" class="%oneup_uploader.chunks.manager.class%">
                   <argument>%oneup_uploader.chunks%</argument>
               </service>
               
               <!-- orphanage -->
               <service id="oneup_uploader.orphanage_manager" class="%oneup_uploader.orphanage.manager.class%">
                   <argument type="service" id="service_container" />
                   <argument>%oneup_uploader.orphanage%</argument>
               </service>
               
               <!-- namer -->
               <service id="oneup_uploader.namer.uniqid" class="%oneup_uploader.namer.uniqid.class%" />
               
               <!-- routing -->
               <service id="oneup_uploader.routing.loader" class="%oneup_uploader.routing.loader.class%">
                   <tag name="routing.loader" />
               </service>
               
               <!-- events -->
               <service id="oneup_uploader.listener.orphanage" class="%oneup_uploader.listener.session.class%">
                   <argument type="service" id="oneup_uploader.orphanage_manager" />
                   
                   <tag name="kernel.event_subscriber" />
               </service>
               
           </services>

</container>